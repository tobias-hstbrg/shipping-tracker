services:
  frontend-dev:
    image: mcr.microsoft.com/devcontainers/typescript-node:20
    user: node
    volumes:
      - ../:/workspace
      - frontend-node-modules:/workspace/frontend/node_modules
    working_dir: /workspace/frontend
    command: sleep infinity
    ports:
      - "5173:5173"
    environment:
      - VITE_API_URL=http://backend:8080
    networks:
      - dev-network

  backend:
    build: ../backend
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=dev
    networks:
      - dev-network

volumes:
  frontend-node-modules:

networks:
  dev-network:
    driver: bridge